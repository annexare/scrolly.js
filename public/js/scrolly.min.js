/*  scrolly v0.6.2, 2015.12.06  */
var dataSet=function(){return document.documentElement.dataset?function(e,t,n){return"undefined"!=typeof n?e.dataset[t]=n:e.dataset[t]}:function(e,t,n){return"undefined"!=typeof n?e.setAttribute("data-"+t,n):e.getAttribute("data-"+t)}}();!function(e){"undefined"!=typeof module&&module.exports?e.call(module.exports):"function"==typeof define&&define.amd?define(["jquery"],e):e.call(window,window.$||window.jQuery||window.Zepto||window.jBone)}(function(e){"use strict";var t="Scrolly",n=t.toLowerCase(),o=function(e){return n+e},i=function(e){return t+": "+e},r="as-body",a={},s=0,u=500,d="u",l=function(e,t){var n=(t.className||"").split(/\s+/);return-1===n.indexOf(e)&&n.push.apply(n,[e]),t.className=n.join(" ")},c=function(e,t){var n=(t?t.className||"":"").split(/\s+/);return-1!==n.indexOf(e)},p=function(e,t){var n=(t?t.className||"":"").split(/\s+/),o=n.indexOf(e);return-1!==o&&n.splice(o,1),t.className=n.join(" ")},f=function(e){var t=document.createElement("div");return t.className=e||"",t},h=function(e,t){if(!e.hasChildNodes())return t;for(var n,o=[],i=0;i<e.childNodes.length;i++)n=(e.childNodes[i].tagName||"").toLowerCase(),"script"!==n&&"style"!==n&&o.push(e.childNodes[i]);return o.forEach(function(e){t.appendChild(e)}),t},m=function(e,t){var n=e.parentNode;if(c(t,n))return n;var o=f(t);return n.insertBefore(o,e),o.appendChild(e),o},b={X:"Width",Y:"Height"},v={X:"Left",Y:"Top"},w=function(e,t){return t["page"+e]||t["client"+e]},y=function(e,t,n){return e[(n||"scroll")+v[t]]},g=function(e,t,n){return e[(n||"scroll")+b[t]]},S=function(e){var t=y(e.wrap,e.axis)||0;return Math.floor((t+e.wrapSize/2)*e.wrapRatio)},x=function(e){return e+"px"},N=function(e){a[e]&&(clearTimeout(a[e]),delete a[e])},C=function(){return!s||Date.now()-u>s?!0:s=0},z=function(){s=Date.now()},E="ontouchstart"in document.documentElement,M="onwheel"in document||document.documentMode>=9?"wheel":"undefined"==typeof document.onmousewheel?"DOMMouseScroll":"mousewheel",L=function(e){document.body.onmousemove=document.body.onmouseup=null,document.ontouchmove=document.ontouchend=null,p(this.noUserSelectClass,document.body),p(this.dragClass,e.bar)},T=function(e,t){var n=this,o=w(e.axis,t),i=0,r=1*e.thumb.style.top.replace("px",""),a=function(t){i=w(e.axis,t)-o+e.thumbSize/2,E&&(i*=-.5),n.setThumbPos.call(n,e,r+i,!0)},s=function(){L.call(n,e)};l(this.noUserSelectClass,document.body),l(this.dragClass,e.bar),E?(document.ontouchmove=function(e){e.preventDefault(),a(e.touches[0])},document.ontouchend=s):(document.body.onmousemove=a,document.body.onmouseup=s)},D=function(e,t){if("function"==typeof e.onEdge){if(!C())return void z();e.onEdge.call(e,t>0),z()}},P=function(e,t){if(1!==e.wrapRatio){var n=y(e.wrap,e.axis)+t["delta"+e.axis];if(n>0&&n+e.wrapSize<g(e.area,e.axis))t.preventDefault(),t.stopPropagation();else if(0!==n)return void D(e,n);e.wrap["scroll"+v[e.axis]]+=t["delta"+e.axis],this.setThumbPos(e)}},A=[],O={axis:"Y",dragClass:"on-drag",onResize:!1,noUserSelectClass:"no-user-select",thumbMinSize:24,bar:function(e,t){if(!e)return console.log(i("No Query specified.")),!1;var n="string"==typeof e?document.querySelectorAll(e):e;if(!n.length)return[this.barNode(n,t)];for(var o=[],r=0;r<n.length;r++)o.push(this.barNode(n[r],t));return o},barNode:function(e,t){if(!e||!e.nodeType)return console.log(i("Couldn't query:"),typeof e,e,t),!1;var s=e||f(),u=e===document.body;u&&(s=h(document.body,f()),document.body.appendChild(s)),"undefined"!=typeof dataSet(s,o("id"))&&this.dispose(dataSet(s,o("id"))),this.onResize||window.addEventListener("resize",this.updateAll.bind(this),!0);var p=t||{},b={dispose:{},params:p,scrolled:0,visible:!1};b.axis=p.axis||this.axis,b.onEdge=p.onEdge||!1,b.thumbMinSize=p.thumbMinSize||this.thumbMinSize,l("area",s),!u&&c(n,s.parentNode)?b.wrap=s.parentNode:(b.wrap=m(s,n+(u?" "+r:"")),b.dispose.wrap=!0),b.area=s;var v="bar",w="thumb";if(c(v,b.wrap.nextSibling))b.bar=b.wrap.nextSibling,c(w,b.bar.firstChild)?b.thumb=b.bar.firstChild:(b.bar.innerHTML="",b.thumb=b.bar.appendChild(f(w)),b.dispose.thumb=!0);else{var y=f(v);b.thumb=y.appendChild(f(w)),b.bar=b.wrap.parentNode.insertBefore(y,b.wrap.nextSibling),b.dispose.bar=!0}var g=dataSet(s,o("id"),A.push(b)-1);return a[d]=setTimeout(function(){O.update(g,!0)},0),g},dispose:function(e){var t="string"==typeof e?parseInt(e,10):"number"==typeof e?e:!1;if(t===!1)return!1;var n=A[t];if(!n||"undefined"==typeof n)return!0;N(d),n.observer&&n.observer.disconnect(),p("area",n.area),n.area.removeAttribute("data-"+o("id"));var i=n.wrap.parentNode===document.body&&n.wrap.className.indexOf(r)>-1;return n.dispose.wrap&&(n.wrap.parentNode.insertBefore(n.area,n.wrap),n.wrap.parentNode.removeChild(n.wrap)),i&&(h(n.area,document.body),document.body.removeChild(n.area)),n.dispose.thumb&&n.thumb.parentNode.removeChild(n.thumb),n.dispose.bar&&n.bar.parentNode.removeChild(n.bar),A[t]=!1,!0},disposeAll:function(){for(var e=0;e<A.length;e++)this.dispose(e)},getID:function(e){return dataSet(e.area,o("id"))},update:function(e,t){var n=A[e];n&&(this.setSize(n),t&&this.setEvents(n))},updateAll:function(){for(var e=0;e<A.length;e++)this.update(e)},setEvents:function(e){var t=this;e.observer=new MutationObserver(function(){t.update(t.getID(e))}),e.observer.observe(e.area,{attributes:!0,childList:!0});var n=function(n){T.call(t,e,n)};E?e.wrap.ontouchstart=function(e){1===e.touches.length&&(e.preventDefault(),e.stopPropagation(),n(e.touches[0]))}:(e.wrap.addEventListener(M,function(n){P.call(t,e,n)}),e.bar.addEventListener("mousedown",n)),e.thumb.addEventListener("click",function(e){e&&(e.preventDefault(),e.stopPropagation())}),e.bar.addEventListener("click",function(n){var o=n["layer"+e.axis];t.setThumbPos.call(t,e,o,!0)})},setSize:function(e){var t=e.wrapSize=g(e.wrap,e.axis,"offset"),n=g(e.area,e.axis);if(e.visible=n>t,!e.visible)return void(e.bar.style.visibility="hidden");var o=e.wrapRatio=t/n,i=e.thumbSize=Math.min(t,Math.max(e.thumbMinSize,t*o));e.thumb.style.height=x(i),e.thumbSize=g(e.thumb,e.axis,"offset"),this.setThumbPos(e),e.bar.style.height=x(t),e.bar.style.visibility="visible"},setThumbPos:function(e,t,n){var o="number"==typeof t?t:S(e),i=e.thumbSize/2,r=e.wrapSize-e.thumbSize,a=i>o?0:o-i;a=a>r?r:a,e.thumb.style[v[e.axis].toLowerCase()]=x(a),n&&(a=a===r?e.wrapSize:a,e.wrap["scroll"+v[e.axis]]=Math.floor(a/e.wrapSize*g(e.area,e.axis)))}};e&&e.fn&&(e.fn.scrolly=function(e){return this.length?"string"!=typeof e?(O.bar(this,e||{}),this):(["dispose","update"].indexOf(e)>-1&&this.forEach(function(t){var n=dataSet(t,o("id"));O[e](n)}),this):this}),this.scrolly=O,this.scrollyst=A});