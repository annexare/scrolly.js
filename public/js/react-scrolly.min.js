/*  scrolly v0.6.0, 2015.11.26  */
var dataSet=function(){return document.documentElement.dataset?function(e,t,n){return"undefined"!=typeof n?e.dataset[t]=n:e.dataset[t]}:function(e,t,n){return"undefined"!=typeof n?e.setAttribute("data-"+t,n):e.getAttribute("data-"+t)}}();!function(e){"undefined"!=typeof module&&module.exports?e.call(module.exports):"function"==typeof define&&define.amd?define(["jquery"],e):e.call(window,window.$||window.jQuery||window.Zepto||window.jBone)}(function(e){"use strict";var t="Scrolly",n=t.toLowerCase(),i=function(e){return n+e},r=function(e){return t+": "+e},a={},o="e",s="u",u=function(e,t){var n=(t.className||"").split(/\s+/);return-1===n.indexOf(e)&&n.push.apply(n,[e]),t.className=n.join(" ")},d=function(e,t){var n=(t?t.className||"":"").split(/\s+/);return-1!==n.indexOf(e)},l=function(e,t){var n=(t?t.className||"":"").split(/\s+/),i=n.indexOf(e);return-1!==i&&n.splice(i,1),t.className=n.join(" ")},c=function(e){var t=document.createElement("div");return t.className=e||"",t},p=function(e,t){var n=e.parentNode;if(d(t,n))return n;var i=c(t);return n.insertBefore(i,e),i.appendChild(e),i},f={X:"Width",Y:"Height"},h={X:"Left",Y:"Top"},m=function(e,t){return t["page"+e]||t["client"+e]},b=function(e,t,n){return e[(n||"scroll")+h[t]]},v=function(e,t,n){return e[(n||"scroll")+f[t]]},y=function(e){var t=b(e.wrap,e.axis)||0;return Math.floor((t+e.wrapSize/2)*e.wrapRatio)},w=function(e){return e+"px"},S=function(e){a[e]&&(clearTimeout(a[e]),delete a[e])},g=function(e){return S(e),a[e]=setTimeout(function(){S(e)},500)},x="ontouchstart"in document.documentElement,N="onwheel"in document||document.documentMode>=9?"wheel":"undefined"==typeof document.onmousewheel?"DOMMouseScroll":"mousewheel",z=function(e){document.body.onmousemove=document.body.onmouseup=null,document.ontouchmove=document.ontouchend=null,l(this.noUserSelectClass,document.body),l(this.dragClass,e.bar)},E=function(e,t){var n=this,i=m(e.axis,t),r=0,a=1*e.thumb.style.top.replace("px",""),o=function(t){r=m(e.axis,t)-i+e.thumbSize/2,x&&(r*=-.5),n.setThumbPos.call(n,e,a+r,!0)},s=function(){z.call(n,e)};u(this.noUserSelectClass,document.body),u(this.dragClass,e.bar),x?(document.ontouchmove=function(e){e.preventDefault(),o(e.touches[0])},document.ontouchend=s):(document.body.onmousemove=o,document.body.onmouseup=s)},C=function(e,t){if("function"==typeof e.onEdge){if(a[o])return void g(o);e.onEdge.call(e,t>0),g(o)}},M=function(e,t){if(1!==e.wrapRatio){var n=b(e.wrap,e.axis)+t["delta"+e.axis];if(e.wrapRatio=e.wrapSize/v(e.area,e.axis),n>0&&n+e.wrapSize<v(e.area,e.axis))t.preventDefault(),t.stopPropagation();else if(0!==n)return void C(e,n);e.wrap["scroll"+h[e.axis]]+=t["delta"+e.axis],this.setThumbPos(e)}},R=[],D={axis:"Y",dragClass:"on-drag",onResize:!1,noUserSelectClass:"no-user-select",thumbMinSize:24,bar:function(e,t){if(!e)return console.log(r("No Query specified.")),!1;var n="string"==typeof e?document.querySelectorAll(e):e;if(!n.length)return[this.barNode(n,t)];for(var i=[],a=0;a<n.length;a++)i.push(this.barNode(n[a],t));return i},barNode:function(e,t){if(!e||!e.nodeType)return console.log(r("Couldn't query:"),typeof e,e,t),!1;"undefined"!=typeof dataSet(e,i("id"))&&this.dispose(dataSet(e,i("id"))),this.onResize||window.addEventListener("resize",this.updateAll.bind(this),!0);var o=t||{},l={dispose:{},params:o,scrolled:0,visible:!1};l.axis=o.axis||this.axis,l.onEdge=o.onEdge||!1,l.thumbMinSize=o.thumbMinSize||this.thumbMinSize,u("area",e),d(n,e.parentNode)?l.wrap=e.parentNode:(l.wrap=p(e,n),l.dispose.wrap=!0),l.area=e;var f="bar",h="thumb";if(d(f,l.wrap.nextSibling))l.bar=l.wrap.nextSibling,d(h,l.bar.firstChild)?l.thumb=l.bar.firstChild:(l.bar.innerHTML="",l.thumb=l.bar.appendChild(c(h)),l.dispose.thumb=!0);else{var m=c(f);l.thumb=m.appendChild(c(h)),l.bar=l.wrap.parentNode.insertBefore(m,l.wrap.nextSibling),l.dispose.bar=!0}var b=dataSet(e,i("id"),R.push(l)-1);return a[s]=setTimeout(function(){D.update(b,!0)},0),b},dispose:function(e){var t="string"==typeof e?parseInt(e,10):"number"==typeof e?e:!1;if(t===!1)return!1;var n=R[t];return n&&"undefined"!=typeof n?(S(o),S(s),n.observer&&n.observer.disconnect(),l("area",n.area),n.area.removeAttribute("data-"+i("id")),n.dispose.wrap&&(n.wrap.parentNode.insertBefore(n.area,n.wrap),n.wrap.parentNode.removeChild(n.wrap)),n.dispose.thumb&&n.thumb.parentNode.removeChild(n.thumb),n.dispose.bar&&n.bar.parentNode.removeChild(n.bar),R[t]=!1,!0):!0},disposeAll:function(){for(var e=0;e<R.length;e++)this.dispose(e)},getID:function(e){return dataSet(e.area,i("id"))},update:function(e,t){var n=R[e];n&&(this.setSize(n),t&&this.setEvents(n))},updateAll:function(){for(var e=0;e<R.length;e++)this.update(e)},setEvents:function(e){var t=this;e.observer=new MutationObserver(function(){t.update(t.getID(e))}),e.observer.observe(e.area,{attributes:!0,childList:!0});var n=function(n){E.call(t,e,n)};x?e.wrap.ontouchstart=function(e){1===e.touches.length&&(e.preventDefault(),e.stopPropagation(),n(e.touches[0]))}:(e.wrap.addEventListener(N,function(n){M.call(t,e,n)}),e.bar.addEventListener("mousedown",n)),e.thumb.addEventListener("click",function(e){e&&(e.preventDefault(),e.stopPropagation())}),e.bar.addEventListener("click",function(n){var i=n["layer"+e.axis];t.setThumbPos.call(t,e,i,!0)})},setSize:function(e){var t=e.wrapSize=v(e.wrap,e.axis,"offset"),n=v(e.area,e.axis);if(e.visible=n>t,!e.visible)return void(e.bar.style.visibility="hidden");var i=e.wrapRatio=t/n,r=e.thumbSize=Math.min(t,Math.max(e.thumbMinSize,t*i));e.thumb.style.height=w(r),e.thumbSize=v(e.thumb,e.axis,"offset"),this.setThumbPos(e),e.bar.style.height=w(t),e.bar.style.visibility="visible"},setThumbPos:function(e,t,n){var i="number"==typeof t?t:y(e),r=e.thumbSize/2,a=e.wrapSize-e.thumbSize,o=r>i?0:i-r;o=o>a?a:o,e.thumb.style[h[e.axis].toLowerCase()]=w(o),n&&(o=o===a?e.wrapSize:o,e.wrap["scroll"+h[e.axis]]=Math.floor(o/e.wrapSize*v(e.area,e.axis)))}};e&&e.fn&&(e.fn.scrolly=function(e){return this.length?"string"!=typeof e?(D.bar(this,e||{}),this):(["dispose","update"].indexOf(e)>-1&&this.forEach(function(t){var n=dataSet(t,i("id"));D[e](n)}),this):this}),this.scrolly=D,this.scrollyst=R});var Scrolly=React.createClass({displayName:"Scrolly",getDefaultProps:function(){return{params:{}}},getID:function(){return this.id},componentDidMount:function(){"undefined"!=typeof scrolly&&(this.id=scrolly.barNode(this.refs.area,this.props.params))},componentWillUnmount:function(){this.id&&(scrolly.dispose(this.id),this.id=!1)},componentDidUpdate:function(){this.id&&scrolly.update(this.id)},render:function(){return React.createElement("div",React.__spread({},this.props),React.createElement("div",{className:"scrolly react"},React.createElement("div",{ref:"area",className:"area"},this.props.children)),React.createElement("div",{className:"bar"},React.createElement("div",{className:"thumb"})))}});"undefined"!=typeof module&&(module.exports=Scrolly);