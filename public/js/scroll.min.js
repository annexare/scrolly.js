/*  scroll.js v0.3.0, 2014.12.12  */
var dataset=function(){return document.documentElement.dataset?function(e,t,n){return"undefined"!=typeof n?e.dataset[t]=n:e.dataset[t]}:function(e,t,n){return"undefined"!=typeof n?e.setAttribute("data-"+t,n):e.getAttribute("data-"+t)}}();(function(){"use strict";var e="Scroll.js",t=function(e){return"scroll"+e},n=function(t){return e+": "+t},a=function(e,t){var n=(t.className||"").split(/\s+/);return-1===n.indexOf(e)&&n.push.apply(n,[e]),t.className=n.join(" ")},r=function(e,t){var n=(t.className||"").split(/\s+/);return-1!==n.indexOf(e)},o=function(e,t){var n=(t.className||"").split(/\s+/),a=n.indexOf(e);return-1!==a&&n.splice(a,1),t.className=n.join(" ")},i=function(e){var t=document.createElement("div");return t.className=e||"",t},s=function(e,t){var n=e.parentNode;if(r(t,n))return n;var a=i(t);return n.insertBefore(a,e),a.appendChild(e),a},u={X:"Width",Y:"Height"},l={X:"Left",Y:"Top"},c=function(e,t){return t["page"+e]||t["client"+e]},d=function(e,t,n){return e[(n||"scroll")+l[t]]},f=function(e,t,n){return e[(n||"scroll")+u[t]]},p=function(e){var t=d(e.wrap,e.axis)||0;return Math.floor((t+e.wrapSize/2)*e.wrapRatio)},h=function(e){return e+"px"},m="ontouchstart"in document.documentElement,b="onwheel"in document||document.documentMode>=9?"wheel":"undefined"==typeof document.onmousewheel?"DOMMouseScroll":"mousewheel",v=function(e){document.body.onmousemove=document.body.onmouseup=null,document.ontouchmove=document.ontouchend=null,o(this.noUserSelectClass,document.body),o(this.onDragClass,e.bar)},w=function(e,t){var n=this,r=c(e.axis,t),o=0,i=1*e.thumb.style.top.replace("px",""),s=function(t){o=c(e.axis,t)-r+e.thumbSize/2,m&&(o*=-.5),n.setThumbPos.call(n,e,i+o,!0)},u=function(){v.call(n,e)};a(this.noUserSelectClass,document.body),a(this.onDragClass,e.bar),m?(document.ontouchmove=function(e){e.preventDefault(),s(e.touches[0])},document.ontouchend=u):(document.body.onmousemove=s,document.body.onmouseup=u)},x=function(e,t){if(1!==e.wrapRatio){var n=d(e.wrap,e.axis)+t["delta"+e.axis];e.wrapRatio=e.wrapSize/f(e.area,e.axis),n>0&&n+e.wrapSize<f(e.area,e.axis)&&(t.preventDefault(),t.stopPropagation()),e.wrap["scroll"+l[e.axis]]+=t["delta"+e.axis],this.setThumbPos(e)}},y=[],S={axis:"Y",onDragClass:"on-drag",noUserSelectClass:"no-user-select",thumbMinSize:24,bar:function(e,r){if(!e)return console.log(n("No Query specified.")),!1;var o=$(e),u=[];return o.length?(o.forEach(function(e){"undefined"!=typeof dataset(e,t("id"))&&this.dispose(dataset(e,t("id")));var n=r||{},o={params:n,scrolled:0,visible:!1};o.axis=n.axis||this.axis,o.thumbMinSize=n.thumbMinSize||this.thumbMinSize,a("area",e),o.wrap=s(e,"scroll"),o.area=e;var l=i("bar");o.thumb=l.appendChild(i("thumb")),o.bar=o.wrap.parentNode.insertBefore(l,o.wrap.nextSibling);var c=dataset(e,t("id"),y.push(o)-1);u.push(c),this.update(c,!0)},this),u):(console.log(n("Couldn't query:"),e,r),!1)},dispose:function(e){var n="number"==typeof e?e:!1;if(n===!1)return!1;var a=y[n];return a&&"undefined"!=typeof a?(a.observer.disconnect(),o("area",a.area),a.area.removeAttribute("data-"+t("id")),a.wrap.parentNode.insertBefore(a.area,a.wrap),a.wrap.parentNode.removeChild(a.wrap),a.bar.parentNode.removeChild(a.bar),y[n]=!1,!0):!0},getID:function(e){return dataset(e.area,t("id"))},update:function(e,t){var n=y[e];"undefined"!=typeof n&&(this.setSize(n),t&&this.setEvents(n))},setEvents:function(e){var t=this;e.observer=new MutationObserver(function(n){console.log(" > mutations for "+e.area.className,n.length),t.update(t.getID(e))}),e.observer.observe(e.area,{attributes:!0,childList:!0});var n=function(n){w.call(t,e,n)};m?e.wrap.ontouchstart=function(e){1===e.touches.length&&(e.preventDefault(),e.stopPropagation(),n(e.touches[0]))}:(e.wrap.addEventListener(b,function(n){x.call(t,e,n)}),e.bar.addEventListener("mousedown",n)),e.thumb.addEventListener("click",function(e){e&&(e.preventDefault(),e.stopPropagation())}),e.bar.addEventListener("click",function(n){var a=n["layer"+e.axis];t.setThumbPos.call(t,e,a,!0)})},setSize:function(e){var t=e.wrapSize=f(e.wrap,e.axis,"offset"),n=f(e.area,e.axis);if(e.visible=n>t,!e.visible)return void(e.bar.style.visibility="hidden");var a=e.wrapRatio=t/n,r=e.thumbSize=Math.min(t,Math.max(e.thumbMinSize,t*a));e.thumb.style.height=h(r),e.thumbSize=f(e.thumb,e.axis,"offset"),this.setThumbPos(e),e.bar.style.height=h(t),e.bar.style.visibility="visible"},setThumbPos:function(e,t,n){var a="number"==typeof t?t:p(e),r=e.thumbSize/2,o=e.wrapSize-e.thumbSize,i=r>a?0:a-r;i=i>o?o:i,e.thumb.style[l[e.axis].toLowerCase()]=h(i),n&&(i=i===o?e.wrapSize:i,e.wrap["scroll"+l[e.axis]]=Math.floor(i/e.wrapSize*f(e.area,e.axis)))}};"undefined"!=typeof module&&module.exports?module.exports=S:"undefined"!=typeof define&&define.amd?define([],function(){return S}):(this.scrolll=S,this.scrollBars=y)}).call(this);